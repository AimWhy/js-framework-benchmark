(()=>{function F(e,s,a,...n){if(!e?.parentElement)throw new Error("first argument to app() must be a valid HTMLElement inside the <html></html> document");if(!s||typeof s!="object")throw new Error("second argument to app() must be a state object");if(typeof a!="function")throw new Error("third argument to app() must be a function that returns a vode");let t={};t.stats={lastRenderTime:0,renderCount:0,liveEffectCount:0,patchCount:0,renderPatchCount:0},Object.defineProperty(s,"patch",{enumerable:!1,configurable:!0,writable:!1,value:async r=>{if(!(!r||typeof r!="function"&&typeof r!="object"))if(t.stats.patchCount++,r?.next){let i=r;t.stats.liveEffectCount++;try{let u=await i.next();for(;u.done===!1;){t.stats.liveEffectCount++;try{t.patch(u.value),u=await i.next()}finally{t.stats.liveEffectCount--}}t.patch(u.value)}finally{t.stats.liveEffectCount--}}else if(r.then){t.stats.liveEffectCount++;try{let i=await r;t.patch(i)}finally{t.stats.liveEffectCount--}}else Array.isArray(r)?typeof r[0]=="function"?r.length>1?t.patch(r[0](t.state,...r.slice(1))):t.patch(r[0](t.state)):t.stats.patchCount--:typeof r=="function"?t.patch(r(t.state)):(t.stats.renderPatchCount++,t.q=m(t.q||{},r,!1),t.isRendering||t.render())}}),Object.defineProperty(t,"render",{enumerable:!1,configurable:!0,writable:!1,value:()=>requestAnimationFrame(()=>{if(t.isRendering||!t.q)return;t.isRendering=!0;let r=Date.now();try{t.state=m(t.state,t.q,!0),t.q=null;let i=a(t.state);t.vode=C(t.state,t.patch,e.parentElement,0,t.vode,i),e.tagName.toUpperCase()!==i[0].toUpperCase()&&(e=t.vode.node,e._vode=t)}finally{t.isRendering=!1,t.stats.renderCount++,t.stats.lastRenderTime=Date.now()-r,t.q&&t.render()}})}),t.patch=s.patch,t.state=s,t.q=null;let o=e;o._vode=t,t.vode=C(s,t.patch,e.parentElement,Array.from(e.parentElement.children).indexOf(e),H(e,!0),a(s));for(let r of n)t.patch(r);return t.patch}function H(e,s){if(e?.nodeType===Node.TEXT_NODE)return e.nodeValue?.trim()!==""?s?e:e.nodeValue:void 0;if(e.nodeType===Node.COMMENT_NODE)return;if(e.nodeType===Node.ELEMENT_NODE){let n=[e.tagName.toLowerCase()];if(s&&(n.node=e),e?.hasAttributes()){let t={},o=e.attributes;for(let r of o)t[r.name]=r.value;n.push(t)}if(e.hasChildNodes()){let t=[];for(let o of e.childNodes){let r=o&&H(o,s);r?n.push(r):o&&s&&t.push(o)}for(let o of t)o.remove()}return n}else return}function U(e,s){if(!e||!Array.isArray(e))throw new Error("first argument to memo() must be an array of values to compare");if(typeof s!="function")throw new Error("second argument to memo() must be a function that returns a vode or props object");return s.__memo=e,s}function V(e){if(!e||typeof e!="object")throw new Error("createState() must be called with a state object");return e}function x(e){if(Array.isArray(e)&&e.length>1&&e[1]&&!Array.isArray(e[1])&&typeof e[1]=="object"&&e[1].nodeType!==Node.TEXT_NODE)return e[1]}function O(e){let s=J(e);return s>0?e.slice(s):null}function J(e){return x(e)?2:1}function m(e,s,a){if(!s)return e;for(let n in s){let t=s[n];if(t&&typeof t=="object"){let o=e[n];o?Array.isArray(t)?e[n]=[...t]:t instanceof Date&&o!==t?e[n]=new Date(t):Array.isArray(o)?e[n]=m({},t,a):typeof o=="object"?m(e[n],t,a):e[n]=m({},t,a):Array.isArray(t)?e[n]=[...t]:t instanceof Date?e[n]=new Date(t):e[n]=m({},t,a)}else t===void 0&&a?delete e[n]:e[n]=t}return e}function C(e,s,a,n,t,o,r){o=R(e,o,t);let i=!o||typeof o=="number"||typeof o=="boolean";if(o===t||!t&&i)return t;let u=t?.nodeType===Node.TEXT_NODE,p=u?t:t?.node;if(i){p?.onUnmount&&s(p.onUnmount(p)),p?.remove();return}let A=!i&&Q(o),b=!i&&z(o),N=!!o&&typeof o!="string"&&!!(o?.node||o?.nodeType===Node.TEXT_NODE);if(!A&&!b&&!N&&!t)throw new Error("Invalid vode: "+typeof o+" "+JSON.stringify(o));if(N&&A?o=o.wholeText:N&&b&&(o=[...o]),u&&A)return p.nodeValue!==o&&(p.nodeValue=o),t;if(A&&(!p||!u)){let T=document.createTextNode(o);return p?(p.onUnmount&&s(p.onUnmount(p)),p.replaceWith(T)):a.childNodes[n]?a.insertBefore(T,a.childNodes[n]):a.appendChild(T),T}if(b&&(!p||u||t[0]!==o[0])){let T=o;1 in T&&(T[1]=R(e,T[1],void 0));let E=x(o);r=E?.xmlns||r;let d=r?document.createElementNS(r,o[0]):document.createElement(o[0]);o.node=d,v(s,d,void 0,E),p?(p.onUnmount&&s(p.onUnmount(p)),p.replaceWith(d)):a.childNodes[n]?a.insertBefore(d,a.childNodes[n]):a.appendChild(d);let g=O(o);if(g)for(let l=0;l<g.length;l++){let c=g[l],y=C(e,s,d,l,void 0,c,r);o[E?l+2:l+1]=y}return d.onMount&&s(d.onMount(d)),o}if(!u&&b&&t[0]===o[0]){o.node=p;let T=o,E=t,d=!1;if(T[1]?.__memo){let c=T[1];if(T[1]=R(e,T[1],E[1]),c!==T[1]){let y=x(o);v(s,p,x(t),y),d=!!y}}else{let c=x(o);v(s,p,x(t),c),d=!!c}let g=O(o),l=O(t);if(g){for(let c=0;c<g.length;c++){let y=g[c],W=l&&l[c],k=C(e,s,p,c,W,y,r);k&&(o[d?c+2:c+1]=k)}for(let c=g.length;l&&c<l.length;c++)l[c]?.node?l[c].node.remove():l[c]?.nodeType===Node.TEXT_NODE&&l[c].remove()}for(let c=g?.length||0;c<l?.length;c++)l[c]?.node?l[c].node.remove():l[c]?.nodeType===Node.TEXT_NODE&&l[c].remove();return o}}function z(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"}function Q(e){return typeof e=="string"||e?.nodeType===Node.TEXT_NODE}function R(e,s,a){if(typeof s!="function")return s;let n=s?.__memo,t=a?.__memo;if(Array.isArray(n)&&Array.isArray(t)&&n.length===t.length){let r=!0;for(let i=0;i<n.length;i++)if(n[i]!==t[i]){r=!1;break}if(r)return a}let o=G(s,e);return typeof o=="object"&&(o.__memo=s?.__memo),o}function G(e,s){return typeof e=="function"?G(e(s),s):e}function v(e,s,a,n){if(!(!n&&!a)){if(a)for(let t in a){let o=a[t],r=n?.[t];o!==r&&(n?n[t]=P(e,s,t,o,r):P(e,s,t,o,void 0))}if(n&&a){for(let t in n)if(!(t in a)){let o=n[t];n[t]=P(e,s,t,void 0,o)}}else if(n)for(let t in n){let o=n[t];n[t]=P(e,s,t,void 0,o)}}}function P(e,s,a,n,t){if(a==="style")if(!t)s.style.cssText="";else if(typeof t=="string")n!==t&&(s.style.cssText=t);else if(n&&typeof n=="object")for(let o in{...n,...t})!n||t[o]!==n[o]?s.style[o]=t[o]:n[o]&&!t[o]&&(s.style[o]=void 0);else for(let o in t)s.style[o]=t[o];else if(a==="class")t?s.setAttribute("class",j(t)):s.removeAttribute("class");else if(a[0]==="o"&&a[1]==="n")if(t){let o=null;if(typeof t=="function"){let r=t;o=i=>e([r,i])}else if(Array.isArray(t)){let r=t,i=t[0];r.length>1?o=()=>e([i,...r.slice(1)]):o=u=>e([i,u])}else typeof t=="object"&&(o=()=>e(t));s[a]=o}else s[a]=null;else t!=null&&t!==!1?s.setAttribute(a,t):s.removeAttribute(a);return t}function j(e){return typeof e=="string"?e:Array.isArray(e)?e.map(j).join(" "):typeof e=="object"?Object.keys(e).filter(s=>e[s]).join(" "):""}var D="a";var S="button";var f="div";var B="h1";var L="span";var _="table",K="tbody",h="td";var X="tr";var Z=1,q=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],w=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],$=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"];function I(e){return Math.round(Math.random()*1e3)%e}function M(e){let s=new Array(e);for(let a=0;a<e;a++)s[a]={id:`${Z++}`,label:`${q[I(q.length)]} ${w[I(w.length)]} ${$[I($.length)]}`};return s}var Y={name:"js-framework-benchmark-vode",version:"1.2.0",description:"vode framework benchmark",main:"main.mjs","js-framework-benchmark":{frameworkVersionFromPackage:"@ryupold/vode",frameworkHomeURL:"https://github.com/ryupold/vode"},dependencies:{"@ryupold/vode":"1.2.0"},devDependencies:{esbuild:"0.25.10"},scripts:{"build-prod":"npm run bundle",bundle:"esbuild src/main.ts --bundle --outfile=main.mjs --minify"},keywords:["@ryupold/vode","vode"],license:"MIT"};var et=V({data:[],selected:null});F(document.getElementById("app"),et,e=>[f,{class:"container",id:"main"},[f,{class:"jumbotron"},[f,{class:"row"},[f,{class:"col-md-6"},[B,`[V,{},d,e] ${Y.dependencies["@ryupold/vode"]} (non-keyed)`]],[f,{class:"col-md-6"},[f,{class:"row"},[f,{class:"col-sm-6 smallpad"},[S,{id:"run",type:"button",class:"btn btn-primary btn-block",onclick:()=>({data:M(1e3),selected:null})},"Create 1,000 rows"]],[f,{class:"col-sm-6 smallpad"},[S,{id:"runlots",type:"button",class:"btn btn-primary btn-block",onclick:()=>({data:M(1e4),selected:null})},"Create 10,000 rows"]],[f,{class:"col-sm-6 smallpad"},[S,{id:"add",type:"button",class:"btn btn-primary btn-block",onclick:()=>({data:e.data.concat(M(1e3))})},"Append 1,000 rows"]],[f,{class:"col-sm-6 smallpad"},[S,{id:"update",type:"button",class:"btn btn-primary btn-block",onclick:()=>({data:e.data.map((s,a)=>a%10===0?{id:s.id,label:s.label+" !!!"}:s)})},"Update every 10th row"]],[f,{class:"col-sm-6 smallpad"},[S,{id:"clear",type:"button",class:"btn btn-primary btn-block",onclick:{data:[],selected:null}},"Clear"]],[f,{class:"col-sm-6 smallpad"},[S,{id:"swaprows",type:"button",class:"btn btn-primary btn-block",onclick:()=>{if(e.data.length>998){let s=e.data[998];e.data[998]=e.data[1],e.data[1]=s}return{}}},"Swap Rows"]]]]]],[_,{class:"table table-hover table-striped test-data"},[K,...e.data.map(s=>U([s.id,s.label,e.selected===s.id],a=>[X,{class:{danger:a.selected===s.id}},[h,{class:"col-md-1"},s.id],[h,{class:"col-md-4"},[D,{onclick:{selected:s.id}},s.label]],[h,{class:"col-md-1"},[D,{onclick:()=>({data:a.data.filter(n=>n.id!==s.id),selected:a.selected===s.id?null:a.selected})},[L,{class:"glyphicon glyphicon-remove","aria-hidden":"true"}]]],[h,{class:"col-md-6"}]]))]],[L,{class:"preloadicon glyphicon glyphicon-remove","aria-hidden":"true"}]]);})();
